# 餐厅点餐系统

一个专为小型餐厅设计的完整点餐系统，支持扫码点餐、会员管理、厨房订单处理等功能。

## 🚀 功能特色

### 核心功能
- **扫码点餐**：顾客可通过浏览器访问点餐系统，支持游客和会员模式
- **会员管理**：完整的会员系统，支持余额充值、积分管理、等级体系
- **菜品管理**：支持菜品分类、价格设置（普通价/会员价）、库存管理
- **厨房管理**：实时订单队列，状态管理，大字体厨房界面
- **订单处理**：完整的订单流程，支持多种支付方式
- **数据统计**：营业数据统计、热销菜品排行、会员消费分析

### 技术特色
- **一键部署**：Windows环境一键安装，自动配置为系统服务
- **响应式设计**：支持手机、平板、桌面端访问
- **实时更新**：厨房订单实时推送，状态同步
- **数据安全**：完整的事务处理，数据备份机制
- **用户友好**：简洁直观的界面设计

## 📋 系统要求

### 硬件要求
- CPU：双核2.0GHz以上
- 内存：2GB以上（推荐4GB）
- 硬盘：1GB可用空间
- 网络：支持局域网访问

### 软件要求
- 操作系统：Windows 7/8/10/11 (64位)
- Node.js：18.0或更高版本
- 浏览器：Chrome 80+、Firefox 75+、Safari 13+、Edge 80+

## 🛠️ 快速安装

### 方法一：一键安装（推荐）

1. 下载或克隆项目代码
2. 双击运行 `install.bat`
3. 按照提示完成安装
4. 安装完成后系统会自动启动

### 方法二：手动安装

1. **安装Node.js**
   ```bash
   # 下载并安装Node.js 18+
   # https://nodejs.org/
   ```

2. **安装依赖**
   ```bash
   npm install --production
   ```

3. **初始化数据库**
   ```bash
   node setup.js
   ```

4. **启动系统**
   ```bash
   npm start
   ```

### 方法三：Windows服务安装

1. 完成手动安装步骤
2. 安装Windows服务
   ```bash
   node install-service.js
   ```
3. 服务会自动启动并设置为开机自启

## 🌐 访问地址

安装完成后，可以通过以下地址访问系统：

- **管理后台**：http://localhost:3000/admin
- **厨房端**：http://localhost:3000/kitchen  
- **点餐端**：http://localhost:3000

## 🔑 默认账号

| 角色 | 用户名 | 密码 |
|------|--------|------|
| 管理员 | admin | admin123 |
| 厨房 | kitchen | kitchen123 |

## 📱 使用指南

### 管理员功能

#### 1. 仪表板
- 查看今日营业数据
- 会员统计和余额信息
- 热销菜品排行
- 快捷操作入口

#### 2. 会员管理
- 添加/编辑/删除会员
- 会员信息查看和搜索
- 消费记录和积分管理

#### 3. 会员充值
- 快速搜索会员
- 多种支付方式支持
- 充值记录查询
- 余额变动记录

#### 4. 菜品管理
- 菜品信息管理
- 价格设置（普通价/会员价）
- 分类管理
- 图片上传
- 库存管理

#### 5. 订单管理
- 订单查看和搜索
- 订单状态管理
- 异常订单处理

### 厨房功能

#### 1. 订单队列
- 实时显示待制作订单
- 按时间排序显示
- 大字体厨房界面

#### 2. 状态管理
- 一键开始制作
- 一键制作完成
- 自动状态更新

#### 3. 订单详情
- 完整订单信息
- 菜品清单和数量
- 备注信息显示

### 顾客点餐

#### 1. 餐桌选择
- 扫码或手动选择餐桌
- 餐厅布局展示
- 餐厅状态显示

#### 2. 会员登录
- 手机号验证登录
- 游客模式支持
- 余额显示

#### 3. 菜单浏览
- 分类筛选
- 菜品详情展示
- 会员价格显示

#### 4. 购物车
- 添加/删除商品
- 数量修改
- 实时价格计算

#### 5. 支付流程
- 多种支付方式
- 余额支付支持
- 混合支付支持

## 🗄️ 数据库设计

系统使用SQLite数据库，包含以下主要表：

- **system_users** - 系统用户（管理员、厨房）
- **members** - 会员信息
- **categories** - 菜品分类
- **dishes** - 菜品信息
- **tables** - 餐桌信息
- **orders** - 订单主表
- **order_items** - 订单明细
- **recharge_records** - 充值记录
- **dish_categories** - 菜品分类关联

## 🛠️ 管理命令

### 服务管理
```bash
# 启动服务
net start RestaurantPOS

# 停止服务
net stop RestaurantPOS

# 重启服务
net stop RestaurantPOS && net start RestaurantPOS

# 卸载服务
node uninstall-service.js
```

### 手动启动
```bash
# 开发模式
npm run dev

# 生产模式
npm start

# 初始化数据库
node setup.js
```

## 📊 系统配置

### 修改配置文件
编辑 `config/app.js` 文件可以修改以下设置：

```javascript
module.exports = {
  port: 3002,              // 服务端口
  sessionSecret: 'your-secret-key',  // 会话密钥
  uploadDir: './public/uploads',      // 上传目录
  maxFileSize: 5 * 1024 * 1024,       // 最大文件大小
  sessionTimeout: 24 * 60 * 60 * 1000, // 会话超时时间
  // 默认账号配置
  defaultAdmin: {
    username: 'admin',
    password: 'admin123'
  }
};
```

## 🔧 故障排除

### 常见问题

#### 1. 端口被占用
```bash
# 查找占用端口的进程
netstat -ano | findstr :3000

# 终止进程
taskkill /PID <进程ID> /F
```

#### 2. 数据库损坏
```bash
# 删除数据库文件并重新初始化
del database.db
node setup.js
```

#### 3. 服务启动失败
```bash
# 检查Node.js版本
node --version

# 重新安装依赖
npm install

# 查看错误日志
type logs\error.log
```

#### 4. 图片上传失败
- 检查 `public/uploads` 目录是否存在
- 检查目录权限
- 检查文件大小限制

### 日志文件
- 应用日志：`logs/app.log`
- 错误日志：`logs/error.log`
- 访问日志：`logs/access.log`

## 🔒 安全建议

1. **修改默认密码**：安装后立即修改默认账号密码
2. **定期备份数据**：定期备份 `database.db` 文件
3. **限制访问权限**：在防火墙中限制外部访问
4. **更新系统**：定期更新依赖包和安全补丁
5. **监控日志**：定期检查系统日志和异常访问

## 📞 技术支持

如果遇到问题或需要技术支持，请：

1. 查看本文档的故障排除部分
2. 检查系统日志文件
3. 确认系统环境要求
4. 联系技术支持团队

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进本项目。

## 📈 更新日志

### v1.0.0 (2025-08-08)
- 初始版本发布
- 完整的点餐系统功能
- Windows一键部署支持
- 会员管理系统
- 厨房订单管理
- 响应式界面设计

---

**感谢使用餐厅点餐系统！** 🍽️